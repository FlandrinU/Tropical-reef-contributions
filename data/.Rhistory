load("/home/david_eme/Bureau/Chap_1_NCPs/R_NCPs/data/metadata_surveys.Rdata")
load("/home/david_eme/Bureau/Chap_1_NCPs/R_NCPs/recycling/outputs/flux_final_data_surveys.Rdata")
View(task3_data_surveys)
load("/home/david_eme/Bureau/Chap_1_NCPs/R_NCPs/data/metadata_surveys.Rdata")
View(metadata_surveys)
View(task3_data_surveys)
#-----------------set directory---------------------
path <- here::here() #should arrive into the R_NCPs file
path
## cleaning memory
rm(list=ls())
load(here::here("recycling", "outputs", "surveys_species_fluxes.Rdata"))
load(here::here("recycling", "outputs", "flux_final_data_surveys.Rdata"))
s<- load(here::here("recycling", "outputs", "flux_final_data_surveys.Rdata"))
## cleaning memory
rm(list=ls())
# datasets from surveys
load(here::here("recycling", "outputs", "surveys_species_fluxes.Rdata"))
load(here::here("recycling", "outputs", "flux_final_data_surveys.Rdata"))
View(task3_data_surveys)
View(surveys_species_fluxes)
surveys_species_fluxes[["recycling_N"]]
row.names(surveys_species_fluxes[["storage_C"]])
#list of filtered surveys
surveys <- task3_data_surveys$SurveyID
surveys
#P
m <- surveys_species_fluxes[["recycling_P"]]
View(m)
#P
m <- surveys_species_fluxes[["recycling_P"]][surveys,]
nrow(m)
length(surveys)
m <- surveys_species_fluxes[["recycling_P"]]
nrow(m)
#P
m <- surveys_species_fluxes[["recycling_P"]] %>%
filter(surveys)
#-----------------Loading packages-------------------
pkgs <- c("here", "tidyverse", "brms", "readr", "picante", "tidybayes", "ggridges", "patchwork", "ggfortify", "corrmorant")
nip <- pkgs[!(pkgs %in% installed.packages())]
nip <- lapply(nip, install.packages, dependencies = TRUE)
ip   <- unlist(lapply(pkgs, require, character.only = TRUE, quietly = TRUE))
#P
m <- surveys_species_fluxes[["recycling_P"]] %>%
filter(surveys)
nrow(m)
m <- m[surveys,]
nrow(m)
View(m)
test <- rowSums(m)
head(test)
test
test <- colSums(m)
test
test <- data.frame(colSums(m))
View(test)
test <- data.frame(colSums(m), colnames("recycling"))
test <- data.frame(colSums(m))
colnames(m) <- "recycling_P"
colnames(m) <- c("recycling_P")
colnames(m) <- c("species","recycling_P")
colnames(m)
colnames(test) <- c("recycling_P")
test <- data.frame(recycling_P = colSums(m))
## cleaning memory
rm(list=ls())
# datasets from surveys
load(here::here("recycling", "outputs", "surveys_species_fluxes.Rdata"))
load(here::here("recycling", "outputs", "flux_final_data_surveys.Rdata"))
#list of filtered surveys
surveys <- task3_data_surveys$SurveyID
length(surveys)
#P
m <- surveys_species_fluxes[["recycling_P"]]
nrow(m)
m <- m[surveys,]
nrow(m)
test <- data.frame(recycling_P = colSums(m))
View(test)
flux_sp <- data.frame(rownames(surveys_species_fluxes[["recycling_P"]]))
View(flux_sp)
flux_sp <- data.frame(colnames(surveys_species_fluxes[["recycling_P"]]))
View(flux_sp)
View(test)
flux_sp <- cbind(flux_sp, test)
View(flux_sp)
load("/home/david_eme/Bureau/Chap_1_NCPs/R_NCPs/recycling/outputs/surveys_species_fluxes.Rdata")
load("/home/david_eme/Bureau/Chap_1_NCPs/R_NCPs/recycling/outputs/flux_final_data_sites.Rdata")
View(surveys_species_fluxes)
View(task3_data_sites)
load("/home/david_eme/Bureau/Chap_1_NCPs/R_NCPs/data/data_species.Rdata")
View(data_species)
View(data_species)
length(surveys)
## cleaning memory
rm(list=ls())
# datasets from surveys
load(here::here("recycling", "outputs", "surveys_species_fluxes.Rdata"))
load(here::here("recycling", "outputs", "flux_final_data_surveys.Rdata"))
#list of filtered surveys
surveys <- task3_data_surveys$SurveyID
length(surveys) #2042
flux_sp <- data.frame(species = colnames(surveys_species_fluxes[["recycling_P"]]))
View(flux_sp)
#P
m <- surveys_species_fluxes[["recycling_P"]]
nrow(m)
View(m)
m <- m[surveys,]
nrow(m)
test <- data.frame(recycling_P = colSums(m))
View(test)
n <- flux_sp$species == rownames(test)
summary(n)
flux_sp <- cbind(flux_sp, test[,1])
View(flux_sp)
flux_sp <- cbind(flux_sp, test$recycling_P)
flux_sp <- flux_sp %>% left_join(test)
flux_sp <- flux_sp %>% left_join(test, by=NULL)
flux_sp <- flux_sp %>% left_join(test, by="species")
## cleaning memory
rm(list=ls())
# datasets from surveys
load(here::here("recycling", "outputs", "surveys_species_fluxes.Rdata"))
load(here::here("recycling", "outputs", "flux_final_data_surveys.Rdata"))
#list of filtered surveys
surveys <- task3_data_surveys$SurveyID
length(surveys) #2042
flux_sp <- data.frame(species = colnames(surveys_species_fluxes[["recycling_P"]]))
View(flux_sp)
#P
m <- surveys_species_fluxes[["recycling_P"]]
nrow(m)
m <- m[surveys,]
#P
m <- surveys_species_fluxes[["recycling_P"]] ; nrow(m)
m <- m[surveys,] ; nrow(m)
for (k in 1:2){
k <- 10 + k
}
P_sp <- data.frame(recycling_P = colSums(m))
View(P_sp)
m <- surveys_species_fluxes[["recycling_P"]][surveys,]
m <- surveys_species_fluxes[["recycling_N"]][surveys,]
m <- surveys_species_fluxes[["recycling_N"]][surveys,]
N_sp <- data.frame(recycling_N = colSums(m))
View(flux_sp)
View(N_sp)
View(P_sp)
flux_sp <- cbind(flux_sp, P_sp, N_sp)
View(flux_sp)
do.call(k)
variables <- c("recycling_P", "recycling_N")
k=variables[1]
k
mat <- surveys_species_fluxes[[k]]
View(mat)
mat <- mat[surveys,]
S <- data.frame(k = colSums(m))
View(S)
k
load("/home/david_eme/Bureau/Chap_1_NCPs/R_NCPs/nutrients/outputs/nutrientdata.RData")
View(nutrientdata)
k
S <- data.frame(get(k) = colSums(m))
get(k)
S <- data.frame(k = colSums(m))
View(S)
k
S <- data.frame(Recycling_sp = colSums(m))
View(S)
S <- data.frame(Recycling_sp = colSums(m)) ; colnames(S) <- k
View(S)
S <- data.frame(colSums(m)) ; colnames(S) <- k
S <- data.frame(colSums(m))
View(S)
S <- data.frame(colSums(m)) ; colnames(S) <- k
View(S)
flux_sp <- data.frame(species = colnames(surveys_species_fluxes[["recycling_P"]]))
View(flux_sp)
flux_sp <- cbind(flux_sp, S)
View(flux_sp)
## cleaning memory
rm(list=ls())
# datasets from surveys
load(here::here("recycling", "outputs", "surveys_species_fluxes.Rdata"))
load(here::here("recycling", "outputs", "flux_final_data_surveys.Rdata"))
#list of filtered surveys
surveys <- task3_data_surveys$SurveyID
length(surveys) #2042
flux_sp <- data.frame(species = colnames(surveys_species_fluxes[["recycling_P"]]))
variables <- c("recycling_P", "recycling_N")
#Sum of recycling per species
for ( k in variables){
mat <- surveys_species_fluxes[[k]]
mat <- mat[surveys,]
S <- data.frame(colSums(m)) ; colnames(S) <- k
flux_sp <- cbind(flux_sp, S)
}
## cleaning memory
rm(list=ls())
# datasets from surveys
load(here::here("recycling", "outputs", "surveys_species_fluxes.Rdata"))
load(here::here("recycling", "outputs", "flux_final_data_surveys.Rdata"))
#list of filtered surveys
surveys <- task3_data_surveys$SurveyID
length(surveys) #2042
flux_sp <- data.frame(species = colnames(surveys_species_fluxes[["recycling_P"]]))
variables <- c("recycling_P", "recycling_N")
## cleaning memory
rm(list=ls())
# datasets from surveys
load(here::here("recycling", "outputs", "surveys_species_fluxes.Rdata"))
load(here::here("recycling", "outputs", "flux_final_data_surveys.Rdata"))
#list of filtered surveys
surveys <- task3_data_surveys$SurveyID
length(surveys) #2042
flux_sp <- data.frame(species = colnames(surveys_species_fluxes[["recycling_P"]]))
variables <- c("recycling_P", "recycling_N")
#Sum of recycling per species
for ( k in variables){
mat <- surveys_species_fluxes[[k]]
mat <- mat[surveys,]
S <- data.frame(colSums(m)) ; colnames(S) <- k
flux_sp <- cbind(flux_sp, S)
}
#Sum of recycling per species
for ( k in variables){
mat <- surveys_species_fluxes[[k]]
mat <- mat[surveys,]
S <- data.frame(colSums(mat)) ; colnames(S) <- k
flux_sp <- cbind(flux_sp, S)
}
flux_sp
